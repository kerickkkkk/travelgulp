{"version":3,"sources":["all.js"],"names":["xhr","XMLHttpRequest","datalink","str","data","headerSelect","document","querySelector","title","list","hotarea","ZoneArea","areaStr","addEventListener","filterArea","filterHotarea","open","send","onload","status","JSON","parse","responseText","result","records","console","log","getsingleArea","e","preventDefault","textContent","value","updataList","totalArea","i","length","push","Zone","zoneStr","Set","innerHTML","placeStr","Name","Picture1","Opentime","Add","Tel","Ticketinfo","target","nodeName"],"mappings":"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","file":"all.js","sourcesContent":["// $(document).ready(function () {\r\n\r\nvar xhr = new XMLHttpRequest();\r\nlet datalink = 'https://data.kcg.gov.tw/api/action/datastore_search?resource_id=92290ee5-6e61-456f-80c0-249eae2fcc97';\r\n\r\n//ajax取得資料\r\n\r\nvar str = \"\";\r\nvar data;\r\n\r\nvar headerSelect = document.querySelector('.header-select');\r\nvar title = document.querySelector('.main-title');\r\nvar list = document.querySelector('.list')\r\nvar hotarea = document.querySelector('.header-hotarea')\r\n\r\nvar ZoneArea=[];\r\nvar areaStr = \"\";\r\n//監聽\r\nheaderSelect.addEventListener('change', filterArea, false);\r\nhotarea.addEventListener('click', filterHotarea, false);\r\n\r\n\r\n\r\n//執行\r\nxhr.open('get', datalink, true);\r\nxhr.send(null);\r\nxhr.onload = function () {\r\n  if (xhr.status == 200) {\r\n    str = JSON.parse(xhr.responseText);\r\n    data = str.result.records;\r\n  } else {\r\n    console.log('錯誤');\r\n  }\r\n  getsingleArea();\r\n}\r\n\r\n\r\n//篩選地區\r\nfunction filterArea(e) {\r\n  e.preventDefault();\r\n  title.textContent = headerSelect.value;\r\n  areaStr = headerSelect.value;\r\n  updataList(areaStr);\r\n}\r\n\r\n// 挑選出有多少行政區\r\nfunction getsingleArea() {\r\n  var totalArea = [];\r\n  for (var i = 0; i < data.length; i++) {\r\n    totalArea.push(data[i].Zone);\r\n  }\r\n  var zoneStr = \"\";\r\n  ZoneArea = [...(new Set(totalArea))];\r\n  console.log(ZoneArea); //27個\r\n  for (var i = 0; i < ZoneArea.length; i++) {\r\n    if (i == 0) {\r\n      zoneStr += `<option value=\"\" disabled selected=\"selected\">--請選擇行政區--</option>`;\r\n    } else {\r\n      zoneStr += `<option value=\"${ZoneArea[i]}\">${ZoneArea[i]}</option>`;\r\n    }\r\n  }\r\n  headerSelect.innerHTML = zoneStr;\r\n}\r\n\r\nfunction updataList(areaStr) {\r\n  var placeStr = \"\";\r\n  for (var i = 0; i < data.length; i++) {\r\n    if (data[i].Zone === areaStr) {\r\n      placeStr += `<div class=\"col-md-6\">\r\n      <div class=\"card mb-5\">\r\n        <div class=\"card-top-img\">\r\n        <span class=\"bg-lihgt\"></span>\r\n          <span class=\"h4 text-white\">${data[i].Name}</span>\r\n          <span class=\"card-area text-white\"> ${data[i].Zone}</span>\r\n          <div class=\"card-img-top bg-cover \" style=\"background-image: url(${data[i].Picture1});height:155px\">\r\n                 \r\n          </div>\r\n        </div>\r\n        <div class=\"card-body p-3\">\r\n          <ul>\r\n            <li class=\"card-body-opentime\">${data[i].Opentime}</li>\r\n            <li class=\"card-body-addr\">${data[i].Add}</li>\r\n            <li class=\"card-body-tel d-flex justify-content-between\">${data[i].Tel}\r\n              <span class=\"card-body-ticket\">${data[i].Ticketinfo}</span>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>`;\r\n    }\r\n    // console.log(placeStr);\r\n    title.innerHTML = areaStr;\r\n    list.innerHTML = placeStr;\r\n  }\r\n}\r\n\r\nfunction filterHotarea(e) {\r\n  e.preventDefault();\r\n  // console.log(e.target.innerHTML)\r\n  // console.log(e.target.nodeName)\r\n  if (e.target.nodeName != \"BUTTON\") { return }\r\n  areaStr = e.target.innerHTML\r\n  // console.log(areaStr)\r\n  updataList(areaStr)\r\n}\r\n\r\n\r\n\r\n{/* <img  src=\"${data[i].Picture1}\" alt=\"${data[i].Name}\">   */}"]}